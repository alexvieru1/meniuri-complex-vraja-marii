generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  directUrl = env("DIRECT_DATABASE_URL")

}

model Dish {
  id        Int      @id @default(autoincrement())
  name      String
  gramaj    Int
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  items     MenuItem[]
}

model DayMenu {
  id        Int       @id @default(autoincrement())
  dateLabel String    // ex: "8 Octombrie 2025"
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt

  menus     Menu[]
}

model Menu {
  id        Int       @id @default(autoincrement())
  type      MenuType
  dayMenuId Int
  dayMenu   DayMenu   @relation(fields: [dayMenuId], references: [id], onDelete: Cascade)
  items     MenuItem[]
}

enum MenuType {
  NORMAL
  DIABET
  HEPATO_GASTRO_INTESTINAL
}

model MenuItem {
  id      Int    @id @default(autoincrement())
  menuId  Int
  menu    Menu   @relation(fields: [menuId], references: [id], onDelete: Cascade)
  meal    Meal
  dishId  Int
  dish    Dish   @relation(fields: [dishId], references: [id], onDelete: Cascade)
}

enum Meal {
  MIC_DEJUN
  PRANZ
  CINA
}